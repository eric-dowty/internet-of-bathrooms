function toiletStatus(){

  setInterval(function(){ 
    getStatuses()
  }, 200); 

};

function getStatuses(){

    $.ajax({
      url: "/status.json",
      dataType: 'json',
      success: function(success){
        updateStatus(success)
      },
      error: function(error){
        console.log(error)
      }
    });

    $.ajax({
      url: "/bot",
      dataType: 'json',
      method: 'GET',
      success: function(success){
        checkSlack(success)
      },
      error: function(error){
        console.log(error)
      }
    });

};

function sendSlack(username){
  console.log(username)
}

function checkSlack(message) {
  if(message.bot){
    $('#bathroom-bot-question').empty();
    $('#bathroom-bot-question').append("Bot enabled!!<br>Click to disable");
    if(message.status > 0){
      sendSlack(message.username)
      updateBot()
    }
  }else{
    $('#bathroom-bot-question').empty();
    $('#bathroom-bot-question').append("Click to enable<br>Bathroom-Bot");
  }
}

function updateStatus(statuses){
  bathroomOne(statuses.bathroom1)
  bathroomTwo(statuses.bathroom2)
  bathroomThree(statuses.bathroom3)
}

function updateBot(){
  $.ajax({
    url: "/bot_update",
    dataType: 'json',
    success: function(success){
    },
    error: function(error){
      console.log(error)
    }
  });
}

function bathroomOne(status){
  if(status === 0){
    $('#bathroom1-img').attr("src", "<%= asset_path 'occupied.png' %>");
  } else {
    $('#bathroom1-img').attr("src", "<%= asset_path 'open.png' %>");
  }
}

function bathroomTwo(status){
  if(status === 0){
    $('#bathroom2-img').attr("src", "<%= asset_path 'occupied.png' %>");
  } else {
    $('#bathroom2-img').attr("src", "<%= asset_path 'open.png' %>");
  }
}

function bathroomThree(status){
  if(status === 0){
    $('#bathroom3-img').attr("src", "<%= asset_path 'occupied.png' %>");
  } else {
    $('#bathroom3-img').attr("src", "<%= asset_path 'open.png' %>");
  }  
}